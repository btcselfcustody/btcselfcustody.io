"use strict";(self.webpackChunkmy_personal_website=self.webpackChunkmy_personal_website||[]).push([[427],{1883:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"coreboot/build","title":"Build Coreboot","description":"Now we will walk through building Coreboot from scratch. We will first install the required tools, then download Coreboot\u2019s source code, build its toolchain, configure it for your mainboard, and finally compile it into a ROM file you can flash.","source":"@site/docs/coreboot/build.md","sourceDirName":"coreboot","slug":"/coreboot/build/","permalink":"/docs/coreboot/build/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"coreboot","permalink":"/docs/tags/coreboot"},{"inline":true,"label":"build","permalink":"/docs/tags/build"},{"inline":true,"label":"bios","permalink":"/docs/tags/bios"}],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Build Coreboot","slug":"/coreboot/build/","tags":["coreboot","build","bios"]},"sidebar":"tutorialCoreboot","previous":{"title":"Requirements","permalink":"/docs/coreboot/requirements/"},"next":{"title":"Downgrading BIOS","permalink":"/docs/coreboot/downgrading-bios/"}}');var i=n(4848),t=n(8453);const s={sidebar_position:3,title:"Build Coreboot",slug:"/coreboot/build/",tags:["coreboot","build","bios"]},l="Build Coreboot",a={},c=[{value:"Step 1: Install tools and libraries needed for coreboot",id:"step-1-install-tools-and-libraries-needed-for-coreboot",level:2},{value:"Step 2: Download Coreboot Source Tree",id:"step-2-download-coreboot-source-tree",level:2},{value:"Step 3: Build the Coreboot Toolchain",id:"step-3-build-the-coreboot-toolchain",level:2},{value:"Step 4: Configure the Build for your Motherboard",id:"step-4-configure-the-build-for-your-motherboard",level:2},{value:"Step 5: Build Coreboot",id:"step-5-build-coreboot",level:2}];function d(e){const o={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:n}=o;return n||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"build-coreboot",children:"Build Coreboot"})}),"\n",(0,i.jsx)(o.p,{children:"Now we will walk through building Coreboot from scratch. We will first install the required tools, then download Coreboot\u2019s source code, build its toolchain, configure it for your mainboard, and finally compile it into a ROM file you can flash."}),"\n",(0,i.jsx)(o.h2,{id:"step-1-install-tools-and-libraries-needed-for-coreboot",children:"Step 1: Install tools and libraries needed for coreboot"}),"\n",(0,i.jsx)(o.p,{children:"Coreboot needs several development tools and libraries to compile successfully.\nThe packages you need depend on your Linux distribution. Run the command that matches your system:"}),"\n",(0,i.jsx)(o.p,{children:"Debian-based distros (e.g., Ubuntu, Linux Mint):"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"sudo apt install -y bison build-essential curl flex git gnat libncurses-dev libssl-dev zlib1g-dev pkgconf\n"})}),"\n",(0,i.jsx)(o.p,{children:"Arch-based distros (e.g., Manjaro, EndeavourOS):"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"sudo pacman -S base-devel curl git gcc-ada ncurses zlib\n"})}),"\n",(0,i.jsx)(o.p,{children:"Red Hat-based distros (e.g., Fedora, CentOS, RHEL):"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"sudo dnf install git make gcc-gnat flex bison xz bzip2 gcc g++ ncurses-devel wget zlib-devel patch\n"})}),"\n",(0,i.jsx)(o.p,{children:"If any package is missing, Coreboot may fail to build, so make sure the installation finishes without errors."}),"\n",(0,i.jsx)(o.h2,{id:"step-2-download-coreboot-source-tree",children:"Step 2: Download Coreboot Source Tree"}),"\n",(0,i.jsx)(o.p,{children:"We will now download Coreboot\u2019s source code from the official repository and move into its directory:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"git clone https://review.coreboot.org/coreboot\ncd coreboot\n"})}),"\n",(0,i.jsx)(o.p,{children:"This will give you the latest development version of Coreboot.\nIf you want to build a specific version, you can check out the corresponding branch or tag after cloning."}),"\n",(0,i.jsx)(o.h2,{id:"step-3-build-the-coreboot-toolchain",children:"Step 3: Build the Coreboot Toolchain"}),"\n",(0,i.jsx)(o.p,{children:"Coreboot uses its own toolchain to ensure that builds are reproducible and work on all supported boards.\nYou must build this toolchain before compiling Coreboot itself."}),"\n",(0,i.jsx)(o.p,{children:"First, see which toolchains are available:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make help_toolchain\n"})}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"Output"}),(0,i.jsx)("p",{children:(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:'*** Toolchain targets ***\n  crossgcc        - Build coreboot cross-compilers for all platforms\n  crossgcc-clean  - Remove all built coreboot cross-compilers\n  iasl            - Build coreboot IASL compiler (built by all cross targets)\n  clang           - Build coreboot clang compiler\n  nasm            - Build coreboot nasm\n  test-toolchain  - Reports if toolchain components are out of date\n  crossgcc-ARCH   - Build cross-compiler for specific architecture\n  ARCH can be "i386", "x64", "arm", "aarch64", "riscv", "ppc64", "nds32le"\n  Use "make [target] CPUS=#" to build toolchain using multiple cores\n  Use "make [target] DEST=some/path" to install toolchain there\n  Use "make [target] BUILDGCC_OPTIONS="-m" to get packages from coreboot mirror"\n'})})})]}),"\n",(0,i.jsx)(o.p,{children:"Choose the one that matches your target architecture.\nFor most x86 systems, including laptops like the ThinkPad T430s, use the i386 toolchain."}),"\n",(0,i.jsx)(o.p,{children:"Examples:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make crossgcc-i386 CPUS=$(nproc)       # build i386 toolchain\nmake crossgcc-aarch64 CPUS=$(nproc)    # build Aarch64 toolchain\nmake crossgcc-riscv CPUS=$(nproc)      # build RISC-V toolchain\n"})}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.strong,{children:"Important notes:"})}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["The ",(0,i.jsx)(o.code,{children:"i386"})," toolchain works for all x86 and x86_64 boards."]}),"\n",(0,i.jsx)(o.li,{children:"You can try building with your system\u2019s compiler, but this often causes build errors. The Coreboot toolchain is strongly recommended."}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"step-4-configure-the-build-for-your-motherboard",children:"Step 4: Configure the Build for your Motherboard"}),"\n",(0,i.jsx)(o.p,{children:"We will now configure Coreboot for the Lenovo ThinkPad T430s.\nThe configuration menu lets you choose the correct mainboard, ROM chip size, and payload."}),"\n",(0,i.jsx)(o.p,{children:"Run the configuration menu:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make menuconfig\n"})}),"\n",(0,i.jsx)(o.p,{children:"In the menu, set:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:"Mainboard  ---\x3e  \n    Mainboard vendor (Lenovo)\n    Mainboard model (ThinkPad T430s)\n    ROM chip size (16384 KB (16 MB))\n< Exit >\n"})}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsx)(o.p,{children:"Make sure the ROM chip size matches your actual hardware. Using the wrong size may result in a non-working firmware."})}),"\n",(0,i.jsx)(o.p,{children:"Now select a payload. A payload is the small program Coreboot loads after initializing the hardware."}),"\n",(0,i.jsxs)(o.p,{children:["We will use ",(0,i.jsx)(o.strong,{children:"SeaBIOS"})," in this example:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:"Payload  ---\x3e\n    Payload to add (SeaBIOS)\n    SeaBIOS version (1.16.3)\n< Exit >\n< Exit >\n< Yes >\n"})}),"\n",(0,i.jsx)(o.p,{children:"(Optional) Save your configuration to a file:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make savedefconfig\ncat defconfig\n"})}),"\n",(0,i.jsx)(o.p,{children:"You should see something similar to:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:"CONFIG_VENDOR_LENOVO=y\nCONFIG_BOARD_LENOVO_T430S=y\n"})}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsx)(o.p,{children:"This may vary depending on your Coreboot source version. Do not worry if there are more or fewer lines."})}),"\n",(0,i.jsx)(o.h2,{id:"step-5-build-coreboot",children:"Step 5: Build Coreboot"}),"\n",(0,i.jsx)(o.p,{children:"With everything set up, you can now build Coreboot:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make\n"})}),"\n",(0,i.jsx)(o.p,{children:"If the build completes successfully, you will see a message like:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-text",children:"Built lenovo/t430s (ThinkPad T430s)\n"})}),"\n",(0,i.jsxs)(o.p,{children:["The compiled ROM file will be located at ",(0,i.jsx)(o.code,{children:"build/coreboot.rom"}),"."]}),"\n",(0,i.jsx)(o.p,{children:"If you want to start fresh and remove all compiled files, run:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"make distclean\n"})}),"\n",(0,i.jsx)(o.p,{children:"This will reset the build environment so you can reconfigure and rebuild from scratch."}),"\n",(0,i.jsx)(o.p,{children:"You now have a Coreboot ROM ready to flash to your device!"})]})}function h(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>l});var r=n(6540);const i={},t=r.createContext(i);function s(e){const o=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:o},e.children)}}}]);