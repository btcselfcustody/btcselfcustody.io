"use strict";(self.webpackChunkmy_personal_website=self.webpackChunkmy_personal_website||[]).push([[6655],{5490:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/serprog_pins-9cc4d8a02f5e325421b5cd40b6ec7d0d.png"},5871:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>h,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"libreboot/pico/connection","title":"Pico-Pomona Clip Connection","description":"To begin flashing the BIOS, you\'ll need to connect your Pico to the Pomona clip, which will then attach to the BIOS chip on your ThinkPad.","source":"@site/docs/libreboot/pico/connection.mdx","sourceDirName":"libreboot/pico","slug":"/libreboot/pico-pomona-connection/","permalink":"/docs/libreboot/pico-pomona-connection/","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"libreboot","permalink":"/docs/tags/libreboot"},{"inline":true,"label":"raspberry","permalink":"/docs/tags/raspberry"},{"inline":true,"label":"pico","permalink":"/docs/tags/pico"}],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Pico-Pomona Clip Connection","slug":"/libreboot/pico-pomona-connection/","tags":["libreboot","raspberry","pico"]},"sidebar":"tutorialLibreboot","previous":{"title":"Build Serprog","permalink":"/docs/libreboot/build-serprog/"},"next":{"title":"Flashing","permalink":"/docs/libreboot/flashing/"}}');var o=i(4848),s=i(8453),l=i(1662);const r={sidebar_position:2,title:"Pico-Pomona Clip Connection",slug:"/libreboot/pico-pomona-connection/",tags:["libreboot","raspberry","pico"]},h="Pico-Pomona Clip Connection",c={},a=[{value:"The Bios Chip",id:"the-bios-chip",level:2},{value:"PIN Map on Raspebrry Pico",id:"pin-map-on-raspebrry-pico",level:2},{value:"Models X230, T420, T430, T440p and T480s",id:"models-x230-t420-t430-t440p-and-t480s",level:2},{value:"Models T530 and W530",id:"models-t530-and-w530",level:2},{value:"The Problem",id:"the-problem",level:3},{value:"The Solution",id:"the-solution",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Connection Steps",id:"connection-steps",level:3},{value:"Setup Photos",id:"setup-photos",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"pico-pomona-clip-connection",children:"Pico-Pomona Clip Connection"})}),"\n",(0,o.jsx)(n.p,{children:"To begin flashing the BIOS, you'll need to connect your Pico to the Pomona clip, which will then attach to the BIOS chip on your ThinkPad."}),"\n",(0,o.jsx)(n.h2,{id:"the-bios-chip",children:"The Bios Chip"}),"\n",(0,o.jsx)(n.p,{children:"The BIOS chip in your ThinkPad models is an SOIC-8 type with 8 pins."}),"\n",(0,o.jsx)(n.p,{children:"In these specific models, you\u2019ll likely find two BIOS chips positioned next to each other. Both of these chips will need to be flashed. Don\u2019t worry, though \u2014 the process is straightforward and will be explained in detail later in this guide."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"IMPORTANT"}),": Be sure to identify ",(0,o.jsx)(n.code,{children:"pin 1"})," (which is marked with a small dot) and then count the pins counterclockwise from there."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(9492).A+"",width:"500",height:"332"})}),"\n",(0,o.jsx)(n.p,{children:"Here are the functions of each pin. You don't necessarily need to understand the purpose of each individual pin. Instead, you simply need to match the corresponding pin on your BIOS chip with the appropriate pin on your Raspberry Pico and connect them using Dupont cables."}),"\n",(0,o.jsx)("b",{children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"1 CS"}),"\n",(0,o.jsx)(n.li,{children:"2 MISO"}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)("s",{children:"3 WP (this is NOT going to be used)"}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"4 GND"}),"\n",(0,o.jsx)(n.li,{children:"5 MOSI"}),"\n",(0,o.jsx)(n.li,{children:"6 CLK (this is actually SCK on your Raspberry Pico)"}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)("s",{children:"7 HOLD (this is NOT going to be used)"}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"8 VCC - 3V3 (this is actually 3V3 on your Raspberry Pico)"}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"pin-map-on-raspebrry-pico",children:"PIN Map on Raspebrry Pico"}),"\n",(0,o.jsx)(n.p,{children:"The below diagram shows the corresponding pins on the Pico board where the Dupont cables should be connected"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(5490).A+"",width:"800",height:"456"})}),"\n",(0,o.jsx)(n.h2,{id:"models-x230-t420-t430-t440p-and-t480s",children:"Models X230, T420, T430, T440p and T480s"}),"\n",(0,o.jsx)(n.p,{children:"For these models, you can start wiring your Dupont cables directly from pin 1 of the BIOS chip \u2014 no extra tricks or workarounds are needed."}),"\n",(0,o.jsx)(n.p,{children:"Once everything is connected properly, your setup should look like this:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:i(7852).A+"",width:"1280",height:"960"})}),"\n",(0,o.jsx)(n.h2,{id:"models-t530-and-w530",children:"Models T530 and W530"}),"\n",(0,o.jsx)(n.p,{children:"These ThinkPad models can be a bit tricky when it comes to BIOS flashing. They require a few extra tools and a small workaround to make the process reliable."}),"\n",(0,o.jsx)(n.p,{children:"Both the T530 and W530 have two SOIC-8 flash chips connected to the same SPI bus. They share the data lines (MISO, MOSI, CLK), but each chip has its own Chip Select (CS#) line, which controls which chip is active at any time."}),"\n",(0,o.jsx)(n.h3,{id:"the-problem",children:"The Problem"}),"\n",(0,o.jsx)(n.p,{children:"When the Southbridge (the part of the motherboard that controls I/O) isn't powered, the CS# line of the inactive chip is left floating\u2014meaning it's not pulled high or low, so it can randomly activate. This can lead to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Flash read/write errors"}),"\n",(0,o.jsx)(n.li,{children:"Both chips responding at the same time"}),"\n",(0,o.jsx)(n.li,{children:"Inconsistent BIOS dumps"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"You\u2019ll notice this if you use a Pomona clip and read the BIOS multiple times: running something like sha1sum on the dumps will give different results each time."}),"\n",(0,o.jsx)(n.p,{children:"This happens because there are no pull-up resistors on the CS# lines by default. So when the Southbridge is off, the chip you don\u2019t want can still partly interfere with the bus."}),"\n",(0,o.jsx)(n.h3,{id:"the-solution",children:"The Solution"}),"\n",(0,o.jsx)(n.p,{children:"To stop the unused chip from interfering, you need to force its CS# pin HIGH (3.3V) so it stays inactive. This makes sure only the chip you want to access is talking on the SPI bus."}),"\n",(0,o.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s a list of the extra tools required:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Dupont cable (female-to-female)"}),"\n",(0,o.jsxs)(n.li,{children:["Test Hook Clip Grabber (",(0,o.jsx)(n.a,{href:"https://www.ebay.com.au/itm/165822939855",children:"link"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["AMS1117-3.3V Power Supply Module (",(0,o.jsx)(n.a,{href:"https://www.ebay.com.au/itm/134721404746?var=434225565399",children:"link"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["Universal Adapter with Selectable Output Voltage (",(0,o.jsx)(n.a,{href:"https://www.amazon.com.au/GTGUGR-Adjustable-Surveillance-Equipment-Selectable/dp/B0C16PS3D7?crid=27ZZJQOOLYUTJ&dib=eyJ2IjoiMSJ9.l0E7BXv_93x-WhbFrictbFdSMDqTN4lKQlGUgRFl9P7JJ2CjJQn9qU9JDHnROEhdfnq2qYRV_wrET0AOHCBsaU7XdfhhVO2MkUJwNQom_vq5JkyySx_JFrZ8i2Q21_UL_EWp97pTSMbZ4amTQENm1rl0CIiQIxjlYktza7lF-gDH9j1uAxiVlC50vv5w6na8Mig1BZMnIRWPi9PHqnBSbUDjSvja4sd_pYxlN39HA_FNoddFhNvbGHRQCXhpRDmaOWMQNDHZk9omJxiRM_zRDWx_h15KAmfdQizpI810Z8U.mK8NA7joAGhXFlsBW9DYx_0nLgNeyvZXgN0gfO8Dq-g&dib_tag=se&keywords=GTGUGR+2m+Universal+Adapter+Power+Supply+30W+AU+2A%2C100-240V+to+3V%2C4.5V%2C5V%2C6V%2C7.5V%2C9V%2C12V&qid=1743991916&sprefix=gtgugr+2m+universal+adapter+power+supply+30w+au+2a+100-240v+to+3v+4.5v+5v+6v+7.5v+9v+12v%2Caps%2C369&sr=8-1",children:"link"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"connection-steps",children:"Connection Steps"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s how to connect everything:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Connect the dupont cable to the test hook clip."}),"\n",(0,o.jsx)(n.li,{children:"Use the hook clip to grab the CS# pin of the flash chip that\u2019s not being used (the one you\u2019re not flashing)."}),"\n",(0,o.jsx)(n.li,{children:"Connect the other end of the dupont cable to the VCC (3.3V output) on the AMS1117 power module."}),"\n",(0,o.jsx)(n.li,{children:"Connect GND from your Raspberry Pi Pico to the GND of the AMS1117."}),"\n",(0,o.jsx)(n.li,{children:"Set the Universal Adapter to 5V output and plug it into the AMS1117 module. The reason for this is that the AMS1117 is a voltage regulator. It needs a higher input of 5V to convert it into the lower 3.3V output that your circuit requires."}),"\n",(0,o.jsx)(n.li,{children:"Clip the Pomona to the chip you want to flash and connect it to your flasher (e.g., Raspberry Pi Pico)."}),"\n",(0,o.jsx)(n.li,{children:"Power on the Universal Adapter. You should see a red LED light up on the AMS1117 module."}),"\n",(0,o.jsx)(n.li,{children:"Power on the AMS1117 module. You should see a red LED light up on the module."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Now the inactive chip is fully disabled, and you\u2019re ready to flash the BIOS reliably."}),"\n",(0,o.jsx)(n.h3,{id:"setup-photos",children:"Setup Photos"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s what the setup looks like:"}),"\n","\n",(0,o.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,o.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:6,style:{textAlign:"center"},children:(0,o.jsx)("img",{src:"/img/libreboot/floating-setup.jpg",alt:"Connection Setup",style:{width:"100%",maxWidth:"100%"}})}),(0,o.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:6,style:{textAlign:"center"},children:(0,o.jsx)("img",{src:"/img/libreboot/floating-clip.jpg",alt:"Connection Clip",style:{width:"100%",maxWidth:"100%"}})})]}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"Now you're ready to clip onto the chip and start flashing the BIOS \u2014 with stable and consistent reads and writes!"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},7852:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/connection-7d8d20c95f5b470f1aa81aaeca11a368.jpg"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(6540);const o={},s=t.createContext(o);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(s.Provider,{value:n},e.children)}},9492:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/soic8-8e90585984226bf8b4459243530f8bd7.jpg"}}]);